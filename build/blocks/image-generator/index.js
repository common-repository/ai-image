(()=>{"use strict";var e,a={306:(e,a,t)=>{const i=window.React,l=window.wp.blocks,r=JSON.parse('{"apiVersion":2,"name":"ai-image/image-generator","version":"1.0.0","title":"AI Image","category":"ai-image","description":"AI Image Generator using OpenAI API.","supports":{"html":false,"anchor":true},"keywords":["openai","ai","image","generator","chatbot","chatgpt3","chatgpt"],"attributes":{"id":{"type":"string"},"image":{"type":"string"}},"example":{"attributes":{"id":"ai-image-1","image":""}},"textdomain":"ai-image","editorScript":"file:./index.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),n=window.wp.i18n,o=window.wp.element,m=window.wp.apiFetch;var s=t.n(m);const c=window.wp.data,g=window.wp.blockEditor,p=window.wp.components;(0,l.registerBlockType)(r,{icon:{src:(0,i.createElement)("svg",{enableBackground:"new 0 0 100 84.8",version:"1.1",viewBox:"0 0 100 84.8",xmlns:"http://www.w3.org/2000/svg"},(0,i.createElement)("path",{fill:"#162B40",d:"m38.3 36h-13.8l-3 9.8h-3.1l8-25.5c0.6-2.1 1.3-3.6 2.1-4.3 0.7-0.9 1.7-1.1 3.1-1.1 1.3 0 2.3 0.4 3.1 1.1 0.7 0.9 1.4 2.3 2.1 4.3l7.5 25.5h-3.1l-2.9-9.8zm-0.7-2.4-4.1-13.2c-0.3-1-0.6-1.7-0.9-2-0.3-0.4-0.7-0.6-1.1-0.6s-0.9 0.1-1.1 0.6c-0.3 0.4-0.6 1-0.9 2l-4.1 13.2h12.2z"}),(0,i.createElement)("path",{fill:"#162B40",d:"M49.9,15.4h3.1v30.6h-3.1V15.4z"}),(0,i.createElement)("path",{d:"M91.9,84.8H8.3c-4.6,0-8.3-3.7-8.3-8.3V8.3C0,3.7,3.7,0,8.3,0h83.5c4.6,0,8.3,3.7,8.3,8.3v68.3    C100,81.1,96.3,84.8,91.9,84.8z M8.3,5.7c-1.4,0-2.6,1.1-2.6,2.6v68.3c0,1.4,1.1,2.6,2.6,2.6h83.5c1.4,0,2.6-1.1,2.6-2.6V8.3    c0-1.4-1.1-2.6-2.6-2.6H8.3z"}),(0,i.createElement)("path",{d:"m93.6 82.2-17.9-18.3c-0.3-0.3-0.6-0.3-0.9-0.1l-15.9 11.2c-2.6 1.8-6 1.6-8.3-0.7l-19.4-19.4c-0.1-0.1-0.4-0.3-0.6-0.1-0.1 0-0.3 0-0.6 0.3l-24.6 25.6-4.1-4 24.9-25.7c1.1-1.3 2.8-2 4.6-2 1.7 0 3.3 0.7 4.6 1.8l19.5 19.3c0.3 0.3 0.6 0.3 0.9 0.1l15.6-11.2c2.6-1.8 6.1-1.6 8.3 0.7l17.9 18.3-4 4.2z"}),(0,i.createElement)("path",{d:"m75.2 52.6c-4.7 0-8.5-3.8-8.5-8.5s3.8-8.5 8.5-8.5 8.5 3.8 8.5 8.5-3.8 8.5-8.5 8.5zm0-11.5c-1.6 0-2.8 1.3-2.8 2.8s1.3 2.8 2.8 2.8 2.8-1.3 2.8-2.8-1.2-2.8-2.8-2.8z"}))},edit:function({attributes:e,clientId:a}){const[t,r]=(0,o.useState)(!1),[m,d]=(0,o.useState)([]),[u,h]=(0,o.useState)(),[_,b]=(0,o.useState)(4),[v,w]=(0,o.useState)("512x512"),{replaceBlock:y}=(0,c.useDispatch)(g.store),[f,E]=(0,o.useState)(""),{mediaUpload:k}=(0,c.useSelect)((e=>{const{getSettings:a}=e(g.store);return{mediaUpload:a().mediaUpload}}),[]),x=()=>{r(!0),s()({path:"/bdthemes/v1/openai/images/generations",method:"POST",data:{prompt:u,number:_,size:v}}).then((e=>{if(r(!1),e.error&&e.error.message)return void E(e.error.message);const a=e.data.map((e=>"data:image/png;base64,"+e.b64_json));d(a)})).catch((e=>{"no_api_key"===e.code&&(E((0,n.__)("Please visit settings and input valid OpenAI token","ai-image")),r(!1))}))};return(0,i.createElement)("div",{...(0,g.useBlockProps)()},!t&&f&&(0,i.createElement)(p.Placeholder,{style:{display:"block",width:"100%"},label:(0,n.__)("AI Image","ai-image"),notices:[(0,i.createElement)("div",{style:{color:"red"}},f,"Please visit settings and input valid OpenAI token"===f&&(0,i.createElement)(p.FlexItem,null,(0,i.createElement)(p.Button,{href:"options-general.php?page=bdthemes-ai-image-options",target:"_blank"},(0,n.__)("Visit Openai Settings","ai-image"))))]},(0,i.createElement)("div",{className:"ai-image-form",style:{display:"block",width:"100%"}},(0,i.createElement)(p.TextareaControl,{label:(0,n.__)("What would you like to see?","ai-image"),help:(0,n.__)("Describe the image you would like to see, this is a required field","ai-image"),onChange:h,value:u,required:!0}),(0,i.createElement)(p.__experimentalNumberControl,{label:(0,n.__)("Number of images","ai-image"),help:(0,n.__)("Number of Generated Images: ","ai-image")+_,value:_,onChange:e=>b(e),min:1,max:10,placeholder:"4",type:"number"}),(0,i.createElement)(p.SelectControl,{label:(0,n.__)("Image size","ai-image"),help:(0,n.__)("Generated Images Size: ","ai-image")+v||"512x512",value:v,options:[{label:(0,n.__)("Large","ai-image"),value:"1024x1024"},{label:(0,n.__)("Medium","ai-image"),value:"512x512"},{label:(0,n.__)("Small","ai-image"),value:"256x256"}],onChange:e=>{w(e)}}),(0,i.createElement)(p.Button,{style:{display:"block",width:"100%"},variant:"primary",onClick:()=>{E(""),x()}},(0,n.__)("Retry","ai-image")))),!f&&!e.requestedPrompt&&(0,i.createElement)(p.Placeholder,{label:(0,n.__)("AI Image","ai-image")},(0,i.createElement)("div",{className:"ai-image-form",style:{display:"block",width:"100%"}},(0,i.createElement)(p.TextareaControl,{label:(0,n.__)("What would you like to see?","ai-image"),help:(0,n.__)("Describe the image you would like to see","ai-image"),onChange:h,required:!0}),(0,i.createElement)(p.__experimentalNumberControl,{label:(0,n.__)("Number of images","ai-image"),help:(0,n.__)("Number of Generated Images: ","ai-image")+_||4,max:10,min:1,value:_,onChange:e=>b(e),placeholder:"4",type:"number"}),(0,i.createElement)(p.SelectControl,{label:(0,n.__)("Image size","ai-image"),help:(0,n.__)("Generated Image Size: ","ai-image")+v,value:v,options:[{label:(0,n.__)("Large","ai-image"),value:"1024x1024"},{label:(0,n.__)("Medium","ai-image"),value:"512x512"},{label:(0,n.__)("Small","ai-image"),value:"256x256"}],onChange:e=>{w(e)}}),(0,i.createElement)(p.Button,{style:{display:"block",width:"100%"},variant:"primary",onClick:()=>{x()}},m.length>0?(0,n.__)("Regenerate","ai-image"):(0,n.__)("Generate","ai-image")))),!f&&!t&&m.length>0&&(0,i.createElement)(p.Placeholder,{label:(0,n.__)("AI Image","ai-image")},(0,i.createElement)("div",null,(0,i.createElement)("div",null,e.requestedPrompt),(0,i.createElement)("div",{style:{fontSize:"20px",lineHeight:"38px"}},(0,n.__)("Please choose your image","ai-image")),(0,i.createElement)(p.Flex,{direction:"row",justify:"space-between"},m.map(((n,o)=>(0,i.createElement)(p.FlexBlock,{key:o,style:{cursor:"pointer"}},(0,i.createElement)("img",{role:"button",className:"wp-block-openai-image",src:n,alt:e.requestedPrompt,onClick:async()=>{if(t)return;r(!0);const i=await fetch(n),o=await i.blob(),m=new File([o],"openai-image-generator_image.png",{type:"image/png"});k({filesList:[m],onFileChange:([t])=>{t.id&&y(a,(0,l.createBlock)("core/image",{url:t.url,caption:e.requestedPrompt,alt:e.requestedPrompt}))},allowedTypes:["image"],onError:()=>{r(!1)}})}}))))))),t&&!f&&(0,i.createElement)(p.Placeholder,{label:(0,n.__)("AI Image is loading please waitâ€¦","ai-image")},(0,i.createElement)("div",null,(0,i.createElement)(p.Spinner,{style:{height:"30px",width:"30px"}}))))},save:function({attributes:e}){const{content:a}=e,t=g.useBlockProps.save();return(0,i.createElement)("div",{...t},a)}})}},t={};function i(e){var l=t[e];if(void 0!==l)return l.exports;var r=t[e]={exports:{}};return a[e](r,r.exports,i),r.exports}i.m=a,e=[],i.O=(a,t,l,r)=>{if(!t){var n=1/0;for(c=0;c<e.length;c++){for(var[t,l,r]=e[c],o=!0,m=0;m<t.length;m++)(!1&r||n>=r)&&Object.keys(i.O).every((e=>i.O[e](t[m])))?t.splice(m--,1):(o=!1,r<n&&(n=r));if(o){e.splice(c--,1);var s=l();void 0!==s&&(a=s)}}return a}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[t,l,r]},i.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return i.d(a,{a}),a},i.d=(e,a)=>{for(var t in a)i.o(a,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},i.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),(()=>{var e={154:0,942:0};i.O.j=a=>0===e[a];var a=(a,t)=>{var l,r,[n,o,m]=t,s=0;if(n.some((a=>0!==e[a]))){for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(m)var c=m(i)}for(a&&a(t);s<n.length;s++)r=n[s],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},t=globalThis.webpackChunkai_image=globalThis.webpackChunkai_image||[];t.forEach(a.bind(null,0)),t.push=a.bind(null,t.push.bind(t))})();var l=i.O(void 0,[942],(()=>i(306)));l=i.O(l)})();